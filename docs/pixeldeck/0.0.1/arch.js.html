<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: arch.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: arch.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @todo more reason for existence
 * @public
 */
const arch = module.exports = {
  // TODO: maybe fs?
  /** node.js `path` library */
  get Path () { return require('path') },
  get Fs () { return require('fs') },
  defineRequires (dirname, target, ...names) {
    return Object.defineProperties(target, names.reduce((obj, name) => {
      obj[name] = { get: () => require(arch.Path.resolve(dirname, name)) }
      return obj
    }, {}))
  },
  /**
   *
   * @param {string} aPath
   * @param {string} replacementExt (optional), giving '' strips off any extension
   */
  getResPathFor (aPath, replacementExt = null) {
    let resPath = arch.Path.join(require('./cfg').resDir, aPath)
    if (replacementExt) {
      while (arch.Path.extname(resPath) !== '') {
        resPath = resPath.replace(arch.Path.extname(resPath), '')
      }
      resPath += replacementExt
    }
    return resPath
  },
  /**
 * take all inputs and turn them into a single clean query object
 * @param {...object} arguments one or more input objects to clean of sub-objects and return as one query.
 * @note order of president follows argument order. #1 overrides #0, etc.
 * @return {object} single object with all non object properties copied onto it.
 **/
  cleanQuery () {
    const query = {}
    for (const arg of arguments) {
      switch (typeof arg) {
        case 'object':
          Object.keys(arg).forEach((key) => {
            if (typeof arg[key] !== 'object') {
              query[key] = arg[key]
            }
          })
          break
        case 'string':
          query.path = arg
          break
        default:
          throw new Error(`don't know how to handle ${typeof arg}`)
      }
    }
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_Model.html">_Model</a></li><li><a href="EvtHub.html">EvtHub</a></li><li><a href="TileMaps.html">TileMaps</a></li><li><a href="TileSets.html">TileSets</a></li></ul><h3>Global</h3><ul><li><a href="global.html#app">app</a></li><li><a href="global.html#arch">arch</a></li><li><a href="global.html#base">base</a></li><li><a href="global.html#EventEmitter">EventEmitter</a></li><li><a href="global.html#evt">evt</a></li><li><a href="global.html#Express">Express</a></li><li><a href="global.html#getRoot">getRoot</a></li><li><a href="global.html#getTileMapHtml">getTileMapHtml</a></li><li><a href="global.html#getTileMapSvg">getTileMapSvg</a></li><li><a href="global.html#getTileSetSvg">getTileSetSvg</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#LokiJs">LokiJs</a></li><li><a href="global.html#newLoadPromise">newLoadPromise</a></li><li><a href="global.html#pixeldeck">pixeldeck</a></li><li><a href="global.html#Restart">Restart</a></li><li><a href="global.html#server">server</a></li><li><a href="global.html#service">service</a></li><li><a href="global.html#Start">Start</a></li><li><a href="global.html#Stop">Stop</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Oct 06 2019 04:59:18 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
